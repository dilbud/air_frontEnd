<div class="bg">
  <div class="container pt-4 pb-4">
    <div class="mat-elevation-z8 section">
      <table mat-table [dataSource]="dataSource" multiTemplateDataRows matSort>

        <ng-container matColumnDef="no">
          <th class="no" mat-header-cell *matHeaderCellDef mat-sort-header>No</th>
          <td class="no" mat-cell *matCellDef="let row">{{ row.no }}</td>
        </ng-container>

        <ng-container matColumnDef="brand">
          <th class="brand" mat-header-cell *matHeaderCellDef mat-sort-header>Brand</th>
          <td class="brand" mat-cell *matCellDef="let row">{{ row.brand | uppercase }}</td>
        </ng-container>

        <ng-container matColumnDef="type">
          <th class="type" mat-header-cell *matHeaderCellDef mat-sort-header>Type</th>
          <td class="type" mat-cell *matCellDef="let row">{{ row.type | titlecase}}</td>
        </ng-container>

        <ng-container matColumnDef="description">
          <th class="des" mat-header-cell *matHeaderCellDef mat-sort-header>Description</th>
          <td class="des" mat-cell *matCellDef="let row">
            {{ row.description}}
          </td>
        </ng-container>

        <ng-container matColumnDef="price">
          <th class="price" mat-header-cell *matHeaderCellDef mat-sort-header>
            Price
          </th>
          <td class="price" mat-cell *matCellDef="let row">{{ row.price }}</td>
        </ng-container>

        <ng-container matColumnDef="expire">
          <th class="exp" mat-header-cell *matHeaderCellDef mat-sort-header>
            Expire
          </th>
          <td class="exp" mat-cell *matCellDef="let row">{{ row.expire }}</td>
        </ng-container>

        <ng-container matColumnDef="expandedDetail">
          <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
            <div class="element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
              <div class="expan-contaner">
                <mat-card class="expan-section" >
                  <div class="expan-frame">
                    <div class="expan-brand">{{element.brand | uppercase}}</div>
                    <div class="expan-type">{{element.type | titlecase}}</div>
                    <div class="expan-discription">{{element.description}}</div>
                    <div class="expan-expire">{{element.expire}}</div>
                    <div class="expan-price">{{element.price | currency:'LK':'Rs: ' }} </div>
                    <button class="expan-action-delete" mat-mini-fab color='primary' (click)="deleteInventory(element.row)">
                      <mat-icon>delete</mat-icon>
                    </button>
                    <button class="expan-action-edit" mat-mini-fab color='primary' (click)="updateInventory(element.row)">
                      <mat-icon>edit</mat-icon>
                    </button>

                  </div>
                </mat-card>
              </div>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
        <tr mat-row *matRowDef="let element; columns: columnsToDisplay" class="element-row"
          [class.expanded-row]="expandedElement === element"
          (click)="expandedElement = expandedElement === element ? null : element;setForm(element.row)"></tr>
        <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
      </table>
    </div>
  </div>
</div>
